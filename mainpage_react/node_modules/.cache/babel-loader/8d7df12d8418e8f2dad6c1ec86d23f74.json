{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getTarget = void 0;\n\nconst isPlainObj = require(\"is-plain-obj\");\n\nconst logger_1 = require(\"./logger\");\n\nconst logger = (0, logger_1.getInstance)();\n\nasync function getTarget(req, config) {\n  let newTarget;\n  const router = config.router;\n\n  if (isPlainObj(router)) {\n    newTarget = getTargetFromProxyTable(req, router);\n  } else if (typeof router === 'function') {\n    newTarget = await router(req);\n  }\n\n  return newTarget;\n}\n\nexports.getTarget = getTarget;\n\nfunction getTargetFromProxyTable(req, table) {\n  let result;\n  const host = req.headers.host;\n  const path = req.url;\n  const hostAndPath = host + path;\n\n  for (const [key] of Object.entries(table)) {\n    if (containsPath(key)) {\n      if (hostAndPath.indexOf(key) > -1) {\n        // match 'localhost:3000/api'\n        result = table[key];\n        logger.debug('[HPM] Router table match: \"%s\"', key);\n        break;\n      }\n    } else {\n      if (key === host) {\n        // match 'localhost:3000'\n        result = table[key];\n        logger.debug('[HPM] Router table match: \"%s\"', host);\n        break;\n      }\n    }\n  }\n\n  return result;\n}\n\nfunction containsPath(v) {\n  return v.indexOf('/') > -1;\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","getTarget","isPlainObj","require","logger_1","logger","getInstance","req","config","newTarget","router","getTargetFromProxyTable","table","result","host","headers","path","url","hostAndPath","key","entries","containsPath","indexOf","debug","v"],"sources":["C:/Users/gram1/Desktop/Frontend-React/mainpage_react/node_modules/http-proxy-middleware/dist/router.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getTarget = void 0;\nconst isPlainObj = require(\"is-plain-obj\");\nconst logger_1 = require(\"./logger\");\nconst logger = (0, logger_1.getInstance)();\nasync function getTarget(req, config) {\n    let newTarget;\n    const router = config.router;\n    if (isPlainObj(router)) {\n        newTarget = getTargetFromProxyTable(req, router);\n    }\n    else if (typeof router === 'function') {\n        newTarget = await router(req);\n    }\n    return newTarget;\n}\nexports.getTarget = getTarget;\nfunction getTargetFromProxyTable(req, table) {\n    let result;\n    const host = req.headers.host;\n    const path = req.url;\n    const hostAndPath = host + path;\n    for (const [key] of Object.entries(table)) {\n        if (containsPath(key)) {\n            if (hostAndPath.indexOf(key) > -1) {\n                // match 'localhost:3000/api'\n                result = table[key];\n                logger.debug('[HPM] Router table match: \"%s\"', key);\n                break;\n            }\n        }\n        else {\n            if (key === host) {\n                // match 'localhost:3000'\n                result = table[key];\n                logger.debug('[HPM] Router table match: \"%s\"', host);\n                break;\n            }\n        }\n    }\n    return result;\n}\nfunction containsPath(v) {\n    return v.indexOf('/') > -1;\n}\n"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAAEC,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,SAAR,GAAoB,KAAK,CAAzB;;AACA,MAAMC,UAAU,GAAGC,OAAO,CAAC,cAAD,CAA1B;;AACA,MAAMC,QAAQ,GAAGD,OAAO,CAAC,UAAD,CAAxB;;AACA,MAAME,MAAM,GAAG,CAAC,GAAGD,QAAQ,CAACE,WAAb,GAAf;;AACA,eAAeL,SAAf,CAAyBM,GAAzB,EAA8BC,MAA9B,EAAsC;EAClC,IAAIC,SAAJ;EACA,MAAMC,MAAM,GAAGF,MAAM,CAACE,MAAtB;;EACA,IAAIR,UAAU,CAACQ,MAAD,CAAd,EAAwB;IACpBD,SAAS,GAAGE,uBAAuB,CAACJ,GAAD,EAAMG,MAAN,CAAnC;EACH,CAFD,MAGK,IAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;IACnCD,SAAS,GAAG,MAAMC,MAAM,CAACH,GAAD,CAAxB;EACH;;EACD,OAAOE,SAAP;AACH;;AACDV,OAAO,CAACE,SAAR,GAAoBA,SAApB;;AACA,SAASU,uBAAT,CAAiCJ,GAAjC,EAAsCK,KAAtC,EAA6C;EACzC,IAAIC,MAAJ;EACA,MAAMC,IAAI,GAAGP,GAAG,CAACQ,OAAJ,CAAYD,IAAzB;EACA,MAAME,IAAI,GAAGT,GAAG,CAACU,GAAjB;EACA,MAAMC,WAAW,GAAGJ,IAAI,GAAGE,IAA3B;;EACA,KAAK,MAAM,CAACG,GAAD,CAAX,IAAoBtB,MAAM,CAACuB,OAAP,CAAeR,KAAf,CAApB,EAA2C;IACvC,IAAIS,YAAY,CAACF,GAAD,CAAhB,EAAuB;MACnB,IAAID,WAAW,CAACI,OAAZ,CAAoBH,GAApB,IAA2B,CAAC,CAAhC,EAAmC;QAC/B;QACAN,MAAM,GAAGD,KAAK,CAACO,GAAD,CAAd;QACAd,MAAM,CAACkB,KAAP,CAAa,gCAAb,EAA+CJ,GAA/C;QACA;MACH;IACJ,CAPD,MAQK;MACD,IAAIA,GAAG,KAAKL,IAAZ,EAAkB;QACd;QACAD,MAAM,GAAGD,KAAK,CAACO,GAAD,CAAd;QACAd,MAAM,CAACkB,KAAP,CAAa,gCAAb,EAA+CT,IAA/C;QACA;MACH;IACJ;EACJ;;EACD,OAAOD,MAAP;AACH;;AACD,SAASQ,YAAT,CAAsBG,CAAtB,EAAyB;EACrB,OAAOA,CAAC,CAACF,OAAF,CAAU,GAAV,IAAiB,CAAC,CAAzB;AACH"},"metadata":{},"sourceType":"script"}