{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getHandlers = exports.init = void 0;\n\nconst logger_1 = require(\"./logger\");\n\nconst logger = (0, logger_1.getInstance)();\n\nfunction init(proxy, option) {\n  const handlers = getHandlers(option);\n\n  for (const eventName of Object.keys(handlers)) {\n    proxy.on(eventName, handlers[eventName]);\n  } // https://github.com/webpack/webpack-dev-server/issues/1642\n\n\n  proxy.on('econnreset', (error, req, res, target) => {\n    logger.error(`[HPM] ECONNRESET: %O`, error);\n  }); // https://github.com/webpack/webpack-dev-server/issues/1642#issuecomment-1104325120\n\n  proxy.on('proxyReqWs', (proxyReq, req, socket, options, head) => {\n    socket.on('error', error => {\n      logger.error(`[HPM] WebSocket error: %O`, error);\n    });\n  });\n  logger.debug('[HPM] Subscribed to http-proxy events:', Object.keys(handlers));\n}\n\nexports.init = init;\n\nfunction getHandlers(options) {\n  // https://github.com/nodejitsu/node-http-proxy#listening-for-proxy-events\n  const proxyEventsMap = {\n    error: 'onError',\n    proxyReq: 'onProxyReq',\n    proxyReqWs: 'onProxyReqWs',\n    proxyRes: 'onProxyRes',\n    open: 'onOpen',\n    close: 'onClose'\n  };\n  const handlers = {};\n\n  for (const [eventName, onEventName] of Object.entries(proxyEventsMap)) {\n    // all handlers for the http-proxy events are prefixed with 'on'.\n    // loop through options and try to find these handlers\n    // and add them to the handlers object for subscription in init().\n    const fnHandler = options ? options[onEventName] : null;\n\n    if (typeof fnHandler === 'function') {\n      handlers[eventName] = fnHandler;\n    }\n  } // add default error handler in absence of error handler\n\n\n  if (typeof handlers.error !== 'function') {\n    handlers.error = defaultErrorHandler;\n  } // add default close handler in absence of close handler\n\n\n  if (typeof handlers.close !== 'function') {\n    handlers.close = logClose;\n  }\n\n  return handlers;\n}\n\nexports.getHandlers = getHandlers;\n\nfunction defaultErrorHandler(err, req, res) {\n  // Re-throw error. Not recoverable since req & res are empty.\n  if (!req && !res) {\n    throw err; // \"Error: Must provide a proper URL as target\"\n  }\n\n  const host = req.headers && req.headers.host;\n  const code = err.code;\n\n  if (res.writeHead && !res.headersSent) {\n    if (/HPE_INVALID/.test(code)) {\n      res.writeHead(502);\n    } else {\n      switch (code) {\n        case 'ECONNRESET':\n        case 'ENOTFOUND':\n        case 'ECONNREFUSED':\n        case 'ETIMEDOUT':\n          res.writeHead(504);\n          break;\n\n        default:\n          res.writeHead(500);\n      }\n    }\n  }\n\n  res.end(`Error occurred while trying to proxy: ${host}${req.url}`);\n}\n\nfunction logClose(req, socket, head) {\n  // view disconnected websocket connections\n  logger.info('[HPM] Client disconnected');\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","getHandlers","init","logger_1","require","logger","getInstance","proxy","option","handlers","eventName","keys","on","error","req","res","target","proxyReq","socket","options","head","debug","proxyEventsMap","proxyReqWs","proxyRes","open","close","onEventName","entries","fnHandler","defaultErrorHandler","logClose","err","host","headers","code","writeHead","headersSent","test","end","url","info"],"sources":["C:/Users/gram1/Desktop/Frontend-React/mainpage_react/node_modules/http-proxy-middleware/dist/_handlers.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getHandlers = exports.init = void 0;\nconst logger_1 = require(\"./logger\");\nconst logger = (0, logger_1.getInstance)();\nfunction init(proxy, option) {\n    const handlers = getHandlers(option);\n    for (const eventName of Object.keys(handlers)) {\n        proxy.on(eventName, handlers[eventName]);\n    }\n    // https://github.com/webpack/webpack-dev-server/issues/1642\n    proxy.on('econnreset', (error, req, res, target) => {\n        logger.error(`[HPM] ECONNRESET: %O`, error);\n    });\n    // https://github.com/webpack/webpack-dev-server/issues/1642#issuecomment-1104325120\n    proxy.on('proxyReqWs', (proxyReq, req, socket, options, head) => {\n        socket.on('error', (error) => {\n            logger.error(`[HPM] WebSocket error: %O`, error);\n        });\n    });\n    logger.debug('[HPM] Subscribed to http-proxy events:', Object.keys(handlers));\n}\nexports.init = init;\nfunction getHandlers(options) {\n    // https://github.com/nodejitsu/node-http-proxy#listening-for-proxy-events\n    const proxyEventsMap = {\n        error: 'onError',\n        proxyReq: 'onProxyReq',\n        proxyReqWs: 'onProxyReqWs',\n        proxyRes: 'onProxyRes',\n        open: 'onOpen',\n        close: 'onClose',\n    };\n    const handlers = {};\n    for (const [eventName, onEventName] of Object.entries(proxyEventsMap)) {\n        // all handlers for the http-proxy events are prefixed with 'on'.\n        // loop through options and try to find these handlers\n        // and add them to the handlers object for subscription in init().\n        const fnHandler = options ? options[onEventName] : null;\n        if (typeof fnHandler === 'function') {\n            handlers[eventName] = fnHandler;\n        }\n    }\n    // add default error handler in absence of error handler\n    if (typeof handlers.error !== 'function') {\n        handlers.error = defaultErrorHandler;\n    }\n    // add default close handler in absence of close handler\n    if (typeof handlers.close !== 'function') {\n        handlers.close = logClose;\n    }\n    return handlers;\n}\nexports.getHandlers = getHandlers;\nfunction defaultErrorHandler(err, req, res) {\n    // Re-throw error. Not recoverable since req & res are empty.\n    if (!req && !res) {\n        throw err; // \"Error: Must provide a proper URL as target\"\n    }\n    const host = req.headers && req.headers.host;\n    const code = err.code;\n    if (res.writeHead && !res.headersSent) {\n        if (/HPE_INVALID/.test(code)) {\n            res.writeHead(502);\n        }\n        else {\n            switch (code) {\n                case 'ECONNRESET':\n                case 'ENOTFOUND':\n                case 'ECONNREFUSED':\n                case 'ETIMEDOUT':\n                    res.writeHead(504);\n                    break;\n                default:\n                    res.writeHead(500);\n            }\n        }\n    }\n    res.end(`Error occurred while trying to proxy: ${host}${req.url}`);\n}\nfunction logClose(req, socket, head) {\n    // view disconnected websocket connections\n    logger.info('[HPM] Client disconnected');\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}